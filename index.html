<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTM Quote Assist Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font to the body */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Tailwind gray-100 */
        }

        /* Styling for the cards containing checkbox groups */
        .checkbox-card {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1.5rem; /* p-6 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); /* shadow-lg */
            transition: all 0.3s ease-in-out;
        }

        .checkbox-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); /* shadow-xl */
        }

        /* Custom checkbox styles */
        .checkbox-input {
            appearance: none; /* Remove default browser appearance */
            background-color: #fff; /* White background for the box */
            margin-right: 0.5rem; /* Space between checkbox and label */
            width: 1.25em; /* Size of the checkbox */
            height: 1.25em;
            border: 2px solid #D1D5DB; /* Tailwind gray-300 border */
            border-radius: 0.25em; /* Rounded corners for the box */
            transform: translateY(-0.075em); /* Align with text */
            display: inline-grid; /* Allows placing content (checkmark) inside */
            place-content: center; /* Center the checkmark */
            cursor: pointer;
            transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }

        /* Focus style for accessibility */
        .checkbox-input:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px #60a5fa; /* Tailwind blue-400 focus ring */
        }

        /* Checkmark style using a pseudo-element */
        .checkbox-input::before {
            content: "";
            width: 0.75em; /* Size of the checkmark */
            height: 0.75em;
            transform: scale(0); /* Hidden by default */
            transition: 120ms transform ease-in-out;
            box-shadow: inset 1em 1em #2563eb; /* Tailwind blue-600 for checkmark color */
            /* For Windows High Contrast Mode, background-color might be used by the browser */
            background-color: CanvasText; /* Fallback for high contrast, actual color from box-shadow */
            transform-origin: bottom left;
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%); /* Checkmark shape */
        }

        /* Style when checkbox is checked */
        .checkbox-input:checked {
            border-color: #2563eb; /* Tailwind blue-600 border */
            background-color: #2563eb; /* Tailwind blue-600 background */
        }

        .checkbox-input:checked::before {
            transform: scale(1); /* Show the checkmark */
            box-shadow: inset 1em 1em #fff; /* White checkmark on blue background */
        }

        /* Label styling */
        .checkbox-label {
            cursor: pointer;
            color: #374151; /* Tailwind gray-700 */
            transition: color 0.2s ease-in-out;
            user-select: none; /* Prevent text selection on click */
        }

        /* Highlight label when checkbox is checked (optional, but good UX) */
        .checkbox-input:checked + .checkbox-label {
            color: #1d4ed8; /* Tailwind blue-700 */
            font-weight: 500; /* Medium weight */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 sm:p-6">

    <div class="w-full max-w-5xl bg-white p-6 sm:p-8 rounded-xl shadow-2xl">
        <header class="mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">RTM Quote Assist Tool</h1>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="checkbox-card">
                <h2 class="text-xl font-semibold text-gray-700 mb-4">Contract Type</h2>
                <div class="space-y-3">
                    <div class="flex items-center">
                        <input type="checkbox" id="osa" name="contractType" value="OSA" class="checkbox-input">
                        <label for="osa" class="checkbox-label">OSA LOT 2.0</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="onsa" name="contractType" value="ONSA" class="checkbox-input">
                        <label for="onsa" class="checkbox-label">ONSA</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="fibre" name="contractType" value="Fibre Build" class="checkbox-input">
                        <label for="fibre" class="checkbox-label">Fibre Build</label>
                    </div>
                </div>
            </div>

            <div class="checkbox-card">
                <h2 class="text-xl font-semibold text-gray-700 mb-4">Traffic Management</h2>
                <div class="space-y-3">
                    <div class="flex items-center">
                        <input type="checkbox" id="roadClosure" name="trafficManagement" value="Road closure" class="checkbox-input">
                        <label for="roadClosure" class="checkbox-label">Road closure</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="to15" name="trafficManagement" value="TO15" class="checkbox-input">
                        <label for="to15" class="checkbox-label">TO15</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="twoWayLights" name="trafficManagement" value="2 Way Lights (40mph>)" class="checkbox-input">
                        <label for="twoWayLights" class="checkbox-label">2 Way Lights (40mph&gt;)</label>
                    </div>
                </div>
            </div>

            <div class="checkbox-card">
                <h2 class="text-xl font-semibold text-gray-700 mb-4">Additional Requirements</h2>
                <div class="space-y-3">
                    <div class="flex items-center">
                        <input type="checkbox" id="manualControl" name="additional" value="Manual Control" class="checkbox-input">
                        <label for="manualControl" class="checkbox-label">Manual Control</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="ooh" name="additional" value="OOH" class="checkbox-input">
                        <label for="ooh" class="checkbox-label">OOH</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="pedSets" name="additional" value="Ped Sets" class="checkbox-input">
                        <label for="pedSets" class="checkbox-label">Ped Sets</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-blue-50 p-6 rounded-lg shadow-inner">
            <p id="output" class="text-lg sm:text-xl text-blue-700 font-medium text-center">Please make a selection from Contract Type and Traffic Management categories.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to all checkbox elements
            const contractTypeCheckboxes = document.querySelectorAll('input[name="contractType"]');
            const trafficManagementCheckboxes = document.querySelectorAll('input[name="trafficManagement"]');
            const additionalCheckboxes = document.querySelectorAll('input[name="additional"]');
            const outputElement = document.getElementById('output');

            // Groups that require mutual exclusivity (only one can be checked)
            const exclusiveGroups = [
                contractTypeCheckboxes,
                trafficManagementCheckboxes,
            ];

            // Function to enforce that only one checkbox in a group can be checked
            function handleExclusivity(checkboxes, currentCheckbox) {
                checkboxes.forEach(cb => {
                    if (cb !== currentCheckbox) {
                        cb.checked = false;
                    }
                });
            }

            // Add change event listeners to checkboxes in exclusive groups
            exclusiveGroups.forEach(group => {
                group.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        if (checkbox.checked) {
                            handleExclusivity(group, checkbox);
                        }
                        updateOutput(); // Update the output whenever a selection changes
                    });
                });
            });

            // Add change event listeners for additional requirement checkboxes (these are not exclusive)
            additionalCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateOutput);
            });

            // Function to get the value of the selected checkbox in a group
            function getSelectedValue(checkboxGroup) {
                for (const checkbox of checkboxGroup) {
                    if (checkbox.checked) {
                        return checkbox.value;
                    }
                }
                return null; // Return null if no checkbox is selected in the group
            }

            // Main function to update the output message based on selections
            function updateOutput() {
                const selectedContractType = getSelectedValue(contractTypeCheckboxes);
                const selectedTrafficManagement = getSelectedValue(trafficManagementCheckboxes);

                let baseQuote = "";
                // Default message if essential selections are not made
                let outputMessage = "Please make a selection from Contract Type and Traffic Management categories.";

                // Proceed only if both a contract type and traffic management type are selected
                if (selectedContractType && selectedTrafficManagement) {
                    // Determine the base quote based on the first two containers
                    if (selectedContractType === "OSA") {
                        if (selectedTrafficManagement === "Road closure") {
                            baseQuote = "Quote for TM09";
                        } else if (selectedTrafficManagement === "TO15") {
                            baseQuote = "Quote for TM13";
                        } else if (selectedTrafficManagement === "2 Way Lights (40mph>)") {
                            baseQuote = "Quote and AFP for TM03";
                        }
                    } else if (selectedContractType === "ONSA") {
                        if (selectedTrafficManagement === "Road closure") {
                            baseQuote = "Quote for MTSX1 and MTSX2";
                        } else if (selectedTrafficManagement === "TO15") {
                            baseQuote = "Quote for MTSX3 and MTSX4";
                        } else if (selectedTrafficManagement === "2 Way Lights (40mph>)") {
                            baseQuote = "Quote and AFP for MTSX5 and MTSX6";
                        }
                    } else if (selectedContractType === "Fibre Build") {
                        if (selectedTrafficManagement === "Road closure") {
                            baseQuote = "Quote and AFP for MTSX1 and MTSX2";
                        } else if (selectedTrafficManagement === "TO15") {
                            baseQuote = "Quote for MTSX3 and MTSX4";
                        } else if (selectedTrafficManagement === "2 Way Lights (40mph>)") {
                            baseQuote = "Quote and AFP for MTSX5 and MTSX6";
                        }
                    }

                    // If a valid base quote was determined, add any extras
                    if (baseQuote) {
                        let extras = "";
                        if (document.getElementById('manualControl').checked) {
                            extras += " with Manual Control";
                        }
                        if (document.getElementById('ooh').checked) {
                            extras += " during Out of Hours";
                        }
                        if (document.getElementById('pedSets').checked) {
                            extras += " with Pedestrian Sets";
                        }
                        // Construct the final output message
                        outputMessage = `You need to make a ${baseQuote}${extras}.`;
                    } else {
                        // This case should ideally not be hit if all combinations are mapped
                        outputMessage = "This combination is not currently configured. Please check selections.";
                    }
                }
                // Update the text content of the output element
                outputElement.textContent = outputMessage;
            }

            // Initial call to set the default message when the page loads
            updateOutput();
        });
    </script>
</body>
</html>
